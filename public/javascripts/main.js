var emotionApp={wrapper:"#emotion-app",onReady:function(){$(emotionApp.wrapper).length>0&&$("form",emotionApp.wrapper).submit(function(e){e.preventDefault(),$(".message",emotionApp.wrapper).remove();var a=/^(http|https)?:\/\/[a-zA-Z0-9-\.]+\.[a-z]{2,4}/;a.test($("input[name=image]").val())?emotionApp.getEmotionByImage($("input[name=image]").val()):$(".results",emotionApp.wrapper).prepend('<div class="message error">Please provide a valid image URL.</div>')})},getEmotionByImage:function(e){var a="5b7211ee8d554584b33ac05dad6d2e49",p={},r='{url: "'+e+'"}';$.ajax({url:"https://api.projectoxford.ai/emotion/v1.0/recognize?"+$.param(p),beforeSend:function(e){e.setRequestHeader("Content-Type","application/json"),e.setRequestHeader("Ocp-Apim-Subscription-Key",a),$(".results",emotionApp.wrapper).html("Calculating emotion...")},type:"POST",data:r}).done(function(a){a.length>0?($(".results",emotionApp.wrapper).html('<p><img src="'+e+'" width="100%" /></p><div class="scores"></div>'),emotion=Object.keys(a[0].scores).reduce(function(e,p){return a[0].scores[e]>a[0].scores[p]?e:p}),bearImage=emotionApp.getBearByEmotion(emotion),$(".results .scores",emotionApp.wrapper).append('<h3>Your emotion is <span style="color: #37373b">'+emotion+'</span>, just like this bear:</h3><img src="'+bearImage+'" width="100%" />')):($(".results",emotionApp.wrapper).html(""),$(".results",emotionApp.wrapper).prepend('<div class="message error">The provided image could not processed, please try again with a different image.</div>'))}).fail(function(){$(".results",emotionApp.wrapper).html(""),$(".results",emotionApp.wrapper).prepend('<div class="message error">The provided image could not processed, please try again with a different image.</div>')})},getBearByEmotion:function(e){var a;switch(e){case"anger":a=["/public/images/bears/angry1.jpg","/public/images/bears/angry2.jpg"];break;case"contempt":a=["/public/images/bears/contempt1.jpg"];break;case"disgust":a=["/public/images/bears/disgusted1.jpg"];break;case"fear":a=["/public/images/bears/fear1.jpg","/public/images/bears/fear2.jpg"];break;case"happiness":a=["/public/images/bears/happy1.jpg","/public/images/bears/happy2.jpg"];break;case"neutral":a=["/public/images/bears/neutral1.jpg","/public/images/bears/neutral2.jpg"];break;case"sadness":a=["/public/images/bears/sad1.jpg","/public/images/bears/sad2.jpg"];break;case"surprise":a=["/public/images/bears/surprised1.jpg","/public/images/bears/surprised2.jpg"];break;default:a=["/public/images/bears/default1.jpg","/public/images/bears/default2.jpg"]}return a[Math.floor(Math.random()*a.length)]}};$(document).ready(emotionApp.onReady);var app={onReady:function(){$(function(){pull=$("#pull-menu"),menu=$("#main-menu ul.menu"),$(pull).on("click",function(e){e.preventDefault(),menu.stop().slideToggle(150)})}),$(window).resize(function(){pull.is(":hidden")&&menu.removeAttr("style")}),$.fn.owlCarousel&&$(".owl-carousel").owlCarousel({lazyLoad:!0,singleItem:!0,pagination:!1,autoHeight:!0,autoPlay:!0,stopOnHover:!0})}};$(document).ready(app.onReady);